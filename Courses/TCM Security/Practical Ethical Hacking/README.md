# TCM Security
##  Practical Ethical Hacking
<hr />

### Network Refresher
#### IP Adresses
  There are 2 types of notation
  - **Ipv4** is **decimal** notation
  - **Ipv6** is in **hexadecimal** notation

IPv4 is the **most commonly used format**, we used for almost everything
 The **IPv4** has **32 bits**, divided In 4 periods (192.168.1.12), that means that 192 = 8 bits 
 
We **ran out of IPv4 space** that the reason why a house has only one public IPv4 adress
**2^32 bits** = 4 294 967 296
But fot IPv6 we have a lot of space

An IPv6 has **128 bits** that means that we can can have** 2^128 bits** and it's a **huge number** lmao
We came with the idea of IPv6 but none use it.

How are we using **IPv4** even if we **ran of space** ?
We are using something called NAT = **Network Adress Translation,** you might have multiple devices in your home, all these adresses are using NAT, threy **don't all have a public IP adress** that why we are using NAT, with NAT we are **giving private IP adresses** , and all of these devices are using **one public ip adress** and this is how we solved the issue without using IPv6

Ip adresses are **Layer 3 protocols** it's the **Router Layer**, when we route traffic **we route form IP adresses**.

#### Mac Adresses
Mac Adresses are **Layer 2** it's related to **Switching**.
it's a **physical adress**, switches are using Mac adresses to communicate, When we download a **Nec** (Network Interface) **a mac adress is assigned.**
Mac adresses have **identifiers** they have **6 pairs of 2**
00:0c:29:0a:42:05
The **first 3 pairs are identifer** for example :
- 00:0c:29 = Vmware, Inc.
and we can identify the target with the Mac Adress

#### TCP, UDP, Three Way Handshake
Now we are talking about the **Transport Layer it's the Layer 4**.
##### TCP vs UDP
- TCP is know as **Transmission Control Protocol**  and it's a **connection oriented protocol**
- UDP is know as **User Datagram Protocol** and it's a **connection less protocol**
So when we have these two protocols one is best suited when it comes to **high reliability, That's TCP** when we want to make a connection we used TCP like loading a webpage that's HTTP and it's utilize TCP 
When you think about **UDP it's for something like a streaming service** that's connection less or **DNS** connections or **Voice over IP** is connection less.

When We are going to be **scanning** the most commonly used protocol will be **TCP**

##### The Three Way Handshake
**TCP works** on what is **called a three way handshake** 
Three way handshake works like this :
- We gonna **send out a SYN packet**
- We are going to **receice a SYN/ACK packet** 
- We are going to **send an ACK packet **

For example: 
- When we go say **Hello** to a neighbor that is a **SYN packet** 
- **SYN/ACK is the response** *Ã©Hi syn, I acknowledge you"* 
- That's when the neighbor waving **Hello back** and then **you are good to go  and start a conversation** so that is the acknowledgment.

Now **we talk about this in terms of ports**, now **ports is an item that that could be opened on a  computer**, **it'a way to communicate with certain protocols**, for example when we talk about HTTP it's over port 80, if we talk about HTTPS it's over port 443.
There a lot of different protocols and **there are 65,535 ports**
Let's say we want to connect to a 443 port in a website.
- We are going to **send out a SYN Packet** to that website, *"Hey, I want to connect to you on port 443"*

*If 443 is open and available for connection they gonna say*
- He will **send us SYN/ACK packet** , *"Hey, go ahead and connect me"*
- And when **we will want to establish that connection we are going to send that acknowledgment packet back**.

#### Common Ports & Protocols	

| TCP | UDP | 
| --------- |: --------: | 
| FTP (21) | DNS (53) |
| SSH (22) | DHCP (67, 68) |
| Telnet (23) | TFTP (69) |
| SMTP (25) | SNMP (161) |
| DNS (53) |
| HTTP (80) / HTTPS (443) |
| POP3 (110) |
| SMB (139 + 445) |
| IMAP (143) |

#### The OSI Model
<u>**The Mnemonic Sentence :** </u>

**P**lease **D**o **N**ot **T**hrow **S**ausage **P**izza **A**way


| Number | Layer | Examples
| --------- |: -------- |:--------: |  
| 1 | **P**hysical Layer | Data cables, Ethernet |
| 2 | **D**ata | Switching  MAC Adresses |
| 3 | **N**etwork | IP Adresses, Routing |
| 4 | **T**ransport | TCP/UDP |
| 5 | **S**ession | Session managment |
| 6 | **P**resentation | WMV, JPEG, MOV |
| 7 | **A**pplication | HTTP, SMTP, FTP |

#### Subnetting
Subnets look like this : **255.255.255.0**
Subnets are all bits, just like an IP adress every period has 8 bits and we have 1 and 0
- If all the 1 are on we will have 255 
- If none the 1 are switched on we will have 0

<a href="https://docs.google.com/spreadsheets/d/1KDsT8szu5dNGy20Hp4ew689oG02NZFIU7MtTbngI36Q/edit?usp=sharing">
	<img src="https://i.ibb.co/mRS8sxJ/Screenshot-2020-12-26-08-20-33.png" alt="CheatSheet Subnet" border="0">
</a>

<u>**Example :**</u>

| IP | Subnet |
| --------- |: -------- :|
| 10.0.0.0/24 | 255.255.255.0 |
| 10.0.4.0/16 | 255.255.0.0 |
| 10.27.4.0/8 | 255.0.0.0 |
| 15.27.4.0/1 | 0.0.0.0 |

- Everytime We have 255 this number is locked in place
- When we have 0 that number is between 0 and 255

<u>**How to Know available Hosts in a network ? **</u>

| IP | Subnet | Empty bits | Empty Hosts |
| --------- | -------- |-------- | -------- |
| 10.17.4.0 | 255.0.0.0 | 32-16 = 24 | (2^24)-2 |

<u>**Understand the broadcast and the network**</u>

| IP | Subnet | Usable Hosts | Network | Broadcast |		
| --------- | -------- | --------- | -------- | -------- |
| 192.168.1.0/24 | 255.255.255.0 | 254| 192.168.1.0 | 192.168.1.255 |
| 192.168.1.0/28 | 255.255.240.0 | 14| 192.168.1.0 | 192.168.1.15 |
| 192.168.0.0/23 | 255.255.254.0 | 510 | 192.168.0.0 | 192.168.1.255 |
| 192.168.0.0/22 | 255.255.252.0 | 1022 | 192.168.0.0 | 192.168.3.255 |
| 192.168.1.0/26 | 255.255.255.192 | 62 | 192.168.1.0 | 192.168.1.63 |
| 192.168.1.0/27 | 255.255.255.224 | 30 | 192.168.1.0 | 192.168.1.31 |
- We always have to substract 2 from the total ammount of hosts because we have to substract the broadcast and the network and it will give us the usable space
- The hosts double each increment of a CIDR
